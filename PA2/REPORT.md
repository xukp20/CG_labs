## PA2

徐康平 计07 2020011016

### 曲线性质

#### 1

同：

- 二者定义曲线上一个点的方式均为基函数值与控制点乘积的和，都是参数曲线，由控制点控制形状

异：

- Bezier的控制点影响整条曲线，而B样条中的控制点仅仅影响局部曲线，因此B样条能够进行局部修改，能够容易地添加新的控制点
- Bezier曲线之间的拼接比较困难，难以实现几何连续性条件，而B样条容易满足此条件

#### 2

控制点序列中前k个和最后k个相同，这样会使得B样条的第一段和最后一段曲线的位置和形状完全一样，因此能够首尾相接，接点前后其实是同一段B样条曲线，能够保证连续



### 代码逻辑

首先给定一个固定的resolution，使用对应曲线pCurve的discretize方法得到绘制出的参数曲线上点的序列curvePoints

之后遍历每一个曲线上采样的点，对其进行旋转，将360°分为steps=40份，每次将原始点的V和T绕y轴进行相应角度旋转，算出surface上一个点的坐标和法向量方向，这样每一个参数曲线上的点都会得到40个surface上的点，所有参数曲线的采样点旋转后组成曲面



### 代码参考

没有与同学讨论，没有借鉴网上代码



### 问题

实现Bezier的导数时，出现了绘制出图像仅有轮廓内部全黑的情况，应当是导数计算错误

使用递推式计算Bezier的导数时，需要考虑到第一项和最后一项的边界问题，我将原始的Tangent += control * n * ΔB形式改写成 Tangent += Δcontrol * n * B，就是相邻两个控制点的差值乘以n, B，这样就避免了边界问题，具体见代码